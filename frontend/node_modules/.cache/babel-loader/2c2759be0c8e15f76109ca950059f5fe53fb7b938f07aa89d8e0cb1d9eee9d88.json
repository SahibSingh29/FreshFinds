{"ast":null,"code":"// import React, { useState } from 'react';\n// import axios from 'axios';\n\n// function CreatePost() {\n//   const [content, setContent] = useState('');\n//   const [image, setImage] = useState(null);\n//   const [error, setError] = useState('');\n//   const [success, setSuccess] = useState('');\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     const token = sessionStorage.getItem('access');\n\n//     if (!token) {\n//       setError('You must be logged in to post.');\n//       return;\n//     }\n\n//     const formData = new FormData();\n//     formData.append('content', content);\n//     formData.append('image', image);\n\n//     try {\n//       await axios.post('http://localhost:8000/posts/', formData, {\n//         headers: {\n//           Authorization: `Bearer ${token}`\n//           // Do NOT set Content-Type manually when using FormData\n//         },\n//       });\n//       setSuccess('Post created!');\n//       setContent('');\n//       setImage(null);\n//       setError('');\n//     } catch (err) {\n//       console.error('Post failed:', err);\n//       setError('Failed to create post. Please try again.');\n//     }\n//   };\n\n//   return (\n//     <div style={{ maxWidth: '500px', margin: 'auto' }}>\n//       <h2>Create a New Post</h2>\n//       <form onSubmit={handleSubmit}>\n//         <textarea\n//           onChange={e => setContent(e.target.value)}\n//           value={content}\n//           placeholder=\"Write something...\"\n//           rows=\"4\"\n//           style={{ width: '100%', marginBottom: '10px' }}\n//         />\n//         <input type=\"file\" accept=\"image/*\" onChange={e => setImage(e.target.files[0])} />\n//         <br />\n//         <button type=\"submit\" style={{ marginTop: '10px' }}>Post</button>\n//       </form>\n//       {success && <p style={{ color: 'green' }}>{success}</p>}\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\n//     </div>\n//   );\n// }\n\n// export default CreatePost;","map":{"version":3,"names":[],"sources":["D:/react_django/frontend/src/components/CreatePost.js"],"sourcesContent":["// import React, { useState } from 'react';\r\n// import axios from 'axios';\r\n\r\n// function CreatePost() {\r\n//   const [content, setContent] = useState('');\r\n//   const [image, setImage] = useState(null);\r\n//   const [error, setError] = useState('');\r\n//   const [success, setSuccess] = useState('');\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     const token = sessionStorage.getItem('access');\r\n\r\n//     if (!token) {\r\n//       setError('You must be logged in to post.');\r\n//       return;\r\n//     }\r\n\r\n//     const formData = new FormData();\r\n//     formData.append('content', content);\r\n//     formData.append('image', image);\r\n\r\n//     try {\r\n//       await axios.post('http://localhost:8000/posts/', formData, {\r\n//         headers: {\r\n//           Authorization: `Bearer ${token}`\r\n//           // Do NOT set Content-Type manually when using FormData\r\n//         },\r\n//       });\r\n//       setSuccess('Post created!');\r\n//       setContent('');\r\n//       setImage(null);\r\n//       setError('');\r\n//     } catch (err) {\r\n//       console.error('Post failed:', err);\r\n//       setError('Failed to create post. Please try again.');\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div style={{ maxWidth: '500px', margin: 'auto' }}>\r\n//       <h2>Create a New Post</h2>\r\n//       <form onSubmit={handleSubmit}>\r\n//         <textarea\r\n//           onChange={e => setContent(e.target.value)}\r\n//           value={content}\r\n//           placeholder=\"Write something...\"\r\n//           rows=\"4\"\r\n//           style={{ width: '100%', marginBottom: '10px' }}\r\n//         />\r\n//         <input type=\"file\" accept=\"image/*\" onChange={e => setImage(e.target.files[0])} />\r\n//         <br />\r\n//         <button type=\"submit\" style={{ marginTop: '10px' }}>Post</button>\r\n//       </form>\r\n//       {success && <p style={{ color: 'green' }}>{success}</p>}\r\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default CreatePost;\r\n"],"mappings":"AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}